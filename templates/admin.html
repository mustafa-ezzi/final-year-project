<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ThreadStory • Admin</title>

  <link rel="icon" href="{% static 'favicon.ico' %}">
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    .font-display { font-family: 'Playfair Display', serif; }

    .input {
      background: rgba(255,255,255,0.9);
      border: 1.5px solid #e5e7eb;
      border-radius: 0.75rem;
      padding: 0.9rem 1rem;
      transition: all 0.25s ease;
    }
    .input:focus {
      border-color: #000;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      outline: none;
    }
  </style>
</head>

<body class="bg-[#f7f7f7] text-black">

<!-- NAVBAR -->
<nav class="fixed top-0 w-full z-50
            bg-white/70 backdrop-blur-2xl
            border-b border-black/10">
  <div class="max-w-7xl mx-auto px-10 py-6 flex justify-between items-center">
    <div>
      <h1 class="font-display text-3xl font-bold tracking-tight">ThreadStory</h1>
      <p class="text-xs tracking-widest text-gray-500 mt-1">ADMIN DASHBOARD</p>
    </div>
    <a href="/" class="px-6 py-2 rounded-full text-xs tracking-[0.25em]
                      bg-black text-white hover:bg-gray-800 transition">
      VIEW STORE
    </a>
  </div>
</nav>

<div class="pt-40 max-w-7xl mx-auto px-10">

<!-- STATS -->
<div class="grid md:grid-cols-3 gap-8 mb-16">
  <div class="bg-white rounded-2xl p-8 shadow-xl">
    <p class="text-xs tracking-widest text-gray-500">TOTAL PRODUCTS</p>
    <p class="font-display text-5xl font-bold mt-4">{{ data|length }}</p>
  </div>

  <div class="bg-white rounded-2xl p-8 shadow-xl">
    <p class="text-xs tracking-widest text-gray-500">CATEGORIES</p>
    <p class="font-display text-5xl font-bold mt-4">3</p>
  </div>

  <div class="bg-white rounded-2xl p-8 shadow-xl">
    <p class="text-xs tracking-widest text-gray-500">STATUS</p>
    <p class="text-green-600 text-5xl mt-4">●</p>
  </div>
</div>

<!-- ADD PRODUCT -->
<div class="bg-white rounded-3xl shadow-2xl p-12 mb-20">
  <h2 class="font-display text-4xl font-bold mb-12">Add New Product</h2>

  <form method="POST" enctype="multipart/form-data" action="{% url 'insert' %}"
        class="grid md:grid-cols-2 gap-8">
    {% csrf_token %}

    <input name="name" placeholder="Product Name" class="input md:col-span-2" required>
    <input name="price" type="number" placeholder="Price" class="input">
    <select name="category" class="input">
      <option disabled selected>Category</option>
      <option>Men</option>
      <option>Women</option>
      <option>Kids</option>
    </select>

    <input name="badge" placeholder="Badge (Optional)" class="input md:col-span-2">

    <textarea name="description" rows="4"
      placeholder="Product description..."
      class="input md:col-span-2 resize-none"></textarea>

    <input type="file" name="image" class="input md:col-span-2" required>

    <button class="md:col-span-2 mt-6
                   bg-black text-white py-4 rounded-full
                   tracking-[0.25em] text-xs
                   hover:bg-gray-800 transition">
      ADD PRODUCT
    </button>
  </form>
</div>

<!-- TABLE -->
<div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
  <div class="px-10 py-8 border-b">
    <h2 class="font-display text-3xl font-bold">Inventory</h2>
    <p class="text-sm text-gray-500 mt-1">Manage your products</p>
  </div>

  <table class="w-full">
    <thead class="text-xs tracking-widest text-gray-500 border-b">
      <tr>
        <th class="p-6">IMAGE</th>
        <th>PRODUCT</th>
        <th>CATEGORY</th>
        <th>PRICE</th>
        <th>BADGE</th>
        <th>ACTIONS</th>
      </tr>
    </thead>

    <tbody>
    {% for p in data %}
      <tr class="border-b hover:bg-gray-50 transition">
        <td class="p-6">
          <img src="{{ p.image.url }}" class="w-16 h-16 rounded-xl object-cover">
        </td>
        <td>
          <p class="font-semibold">{{ p.name }}</p>
          <p class="text-xs text-gray-500">{{ p.description|truncatechars:40 }}</p>
        </td>
        <td>{{ p.category }}</td>
        <td class="font-display font-bold">${{ p.price }}</td>
        <td>
          {% if p.badge %}
          <span class="px-3 py-1 text-xs rounded-full bg-black text-white">{{ p.badge }}</span>
          {% else %}
          <span class="text-xs text-gray-400">—</span>
          {% endif %}
        </td>
        <td class="flex gap-2 py-6">
          <a href="{% url 'update' p.id %}" class="px-4 py-2 text-xs border rounded-full hover:bg-black hover:text-white transition">EDIT</a>
          <a href="{% url 'delete' p.id %}" class="px-4 py-2 text-xs border border-red-500 text-red-500 rounded-full hover:bg-red-500 hover:text-white transition">DELETE</a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

</div>

<footer class="mt-24 py-10 text-center text-xs text-gray-500">
  © 2024 ThreadStory — Luxury Admin Panel
</footer>

</body>
</html>
